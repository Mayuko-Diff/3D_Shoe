# 採寸データ管理機能 詳細要件

## 1. データ入力要件

### 1.1 基本情報
- 患者情報
  - 患者名（必須）
  - 処方医名（必須）
  - 入力者名（必須）
  - 職種（必須）：医師、看護師、理学療法士など
  - 身長（cm）
  - 体重（kg）

### 1.2 足の測定データ
- 基本測定値（左右それぞれ）
  - 足長（cm）：必須、小数点1桁まで
  - 足幅（cm）：必須、整数
  - 足囲（cm）：必須、整数
  - 親指の角度（度）：必須、整数
  - 小指の角度（度）：必須、整数

- 足の状態（左右それぞれ）
  - しびれ：有無、詳細情報
  - 乾燥：有無、詳細情報
  - かゆみ：有無、詳細情報
  - 違和感：有無、詳細情報
  - 感覚麻痺：有無、詳細情報
  - 痛み：有無、詳細情報
  - その他：自由記述

### 1.3 生活環境情報
- 身体の硬さ：柔らかい、普通、硬い
- 手指の動き：良好（つまめる）、制限あり、不可（つまめない）
- 杖の使用：使用している、使用していない
- 主な使用場所：自由記述
- 追加情報：自由記述

### 1.4 写真データ
- 左右それぞれの足の写真
- 推奨フォーマット：WebP
- 最大ファイルサイズ：5MB/枚

## 2. データ検証要件

### 2.1 入力値の検証
- 数値範囲チェック
  - 足長：18.0-35.0cm
  - 足幅：5-20cm
  - 足囲：15-40cm
  - 角度：0-90度
  - 身長：100-250cm
  - 体重：20-200kg

### 2.2 必須項目チェック
- 患者基本情報の必須項目
- 足の基本測定値の必須項目

### 2.3 データ整合性チェック
- 左右の測定値の極端な差異の検出
- 身長・体重と足のサイズの整合性

## 3. 履歴管理要件

### 3.1 データ保存
- 全ての測定データを永続的に保存
- 測定日時、測定者情報の記録
- 変更履歴の記録

### 3.2 履歴表示
- 時系列での測定データの表示
- 測定値の変化グラフ表示
- 前回測定との差分表示

### 3.3 データエクスポート
- CSV形式でのエクスポート機能
- 医療機関別のデータ抽出

## 4. セキュリティ要件

### 4.1 アクセス制御
- 医療機関単位でのデータアクセス制限
- 役割に応じた操作権限の設定

### 4.2 データ保護
- 個人情報の暗号化保存
- アクセスログの記録
- データバックアップの自動化 